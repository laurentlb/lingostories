<!doctype html>
<html lang="en">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:type" content="website"/>
<meta property="og:site_name" content="LingoStories"/>
<meta property="og:description" content="Free interactive stories for language learners." />
<title>LingoStories - free interactive stories for learning languages</title>
<script type="module" src="js/main.js"></script>

<link rel="stylesheet" href="style.css">

<div class="main">
    <div class="top">
        <a href="/"><img src="img/home.svg" class="icon top-icon" title="Back to the main page"></a>
        <details>
        <summary><img src="img/options.svg" class="icon top-icon" title="Settings"></summary>
        <ul>
            <li>
                <label>Navigation mode</label>
                <select id="mode">
                    <option title="Show the transcript immediately" value="audioAndText">Audio and text</option>
                    <option title="Automatically play the next sentence" value="autoAdvance">Auto play</option>
                    <option title="Show the transcript after a click" value="audioFirst">Listening comprehension</option>
                    <option title="Disable audio" value="textOnly">Text only</option>
                </select>
            <li>
                <label for="volume">Volume</label>
                <input type="range" min="0" max="1" step="0.01" value="1" class="slider" id="volume">
            <li title="How fast the voice speaks">
                <label>Voice speed</label>
                <input type="range" min="0.4" max="1.2" step="0.2" value="1" class="slider" id="rate">
            <li title="Voice used for the local TTS, which is used only as a backup"> <label>Voice</label>
                <select id="voice"></select>
            <li title="Automatically show the translation below the transcript">
                <label>Show translations</label>
                <input type="checkbox" id="showTranslations">
            <li title="Language used for the translations"> <label>Translation</label>
                <select id="targetLang">
                    <option value="en">English</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="pl">Polish</option>
                </select>
        </ul>
    </details>
    </div>

    <div class="middle">
        <div id="infoHeader">
            <h1> LingoStories </h1>
            <p style="font-style: italic;">
                Free interactive stories for language learners.
            </p>
            <a href="https://discord.gg/7hCdq7Fj"><img class="logo" title="Discord community" src="img/discord.svg"></a>
            <a href="https://github.com/laurentlb/lingostories"><img class="inv-logo" title="GitHub" src="img/github.svg"></a>

            <p>
                <details>
                <summary>
                    <b>This is a work in progress. </b>
                </summary>
                    The stories are not complete; the translations were not proofread; the audio uses an AI voice.
                    This is just a prototype to get feedback and improve the concept.
                </details>
            </p>
            <p>
                <a href="https://docs.google.com/document/d/1LppZEDHxceiFuagMOTKEwsR2ZfXev2sJ1TzfrVokNoc/edit?usp=sharing">Read FAQ on Google Docs</a> -
                <a href="https://forms.gle/9djaTH25wUN74psm8">Request new language</a>
            </p>
        </div>
        <div class="info" id="languageSelector">
            <p>Select a language to study.</p>
            <a href="?lang=en"><img class="flag" src="img/flags/gb.svg">English</a><br>
            <a href="?lang=fr"><img class="flag" src="img/flags/fr.svg">French</a><br>
            <a href="?lang=de"><img class="flag" src="img/flags/de.svg">German</a><br>
            <a href="?lang=pl"><img class="flag" src="img/flags/pl.svg">Polish</a><br>
        </div>
        <div class="info" style="display: none;" id="storySelector">
            <p>Select a story to read.</p>

            <div>
            <img src="img/arrow-right-3-square.svg" class="icon choice-icon" onclick="chooseStory('intro')">
            <span>Introduction</span>
            </div>

            <!-- <div>
            <img src="img/arrow-right-3-square.svg" class="icon choice-icon" onclick="chooseStory('restaurant')">
            <span>At the Restaurant</span>
            </div> -->

            <div>
                <img src="img/arrow-right-3-square.svg" class="icon choice-icon" onclick="chooseStory('park')">
                <span>At the Park</span>
            </div>
            </div>
        <div class="info" style="display: none;" id="no-voices">No voices available.</div>

        <div class="story"></div>
        <img src="img/comment-dots.svg" id="inlineNext" class="icon bubble-icon" onclick="next()">

        <div class="story-end">
            <img class="certificate" src="img/certificate-badge.svg">
            <h2>Congratulations!</h2>
            <p>You've reached the end of the story.</p>

            <div style="display: flex;">
                <img class="icon player-icon" src="img/exit.svg" title="Choose another story" onclick="backToMenu();">
                <img class="icon player-icon" src="img/restart.svg" title="Restart the story" onclick="resetStory(); next();">
            </div>
        </div>

        <div style="height: 30vh;"></div>
    </div>

</div>
<div class="footer">
    <img class="icon player-icon" id="player-next" src="img/player-play.svg" title="Next" onclick="next();">
    <img class="icon player-icon" id="player-all" src="img/player-end.svg" title="Show All" onclick="showAll();">
    <img class="icon player-icon" id="player-restart" src="img/restart.svg" title="Restart the story" onclick="resetStory(); next();">
</div>

<script>

window.onload = function(){
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has("lang")) {
        setLanguage(urlParams.get("lang"));
    }

    if (urlParams.has("story")) {
        chooseStory(urlParams.get("story"));
    }
};

</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SJPVM9P6EP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SJPVM9P6EP');
</script>
